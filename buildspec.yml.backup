version: 0.2


env:parameter-store
  # REGION: 
  EXEC_ROLE: "EMAIL_FUNCTION_ROLE"
  # ZIPFILE: 
  FUNCTION_NAME: SendingEmail

phase: 
  zip: 
    commands: 
      - zip SendingEmail.zip sending_email.js

  upload: 
    commands: 
      - aws lambda create-function --function-name "${FUNCTION_NAME}"  \
         --runtime nodejs14.x --memory-size 128 --timeout 3 --zip-file "fileb://SendingEmail.zip" \
         --handler "${FUNCTION_NAME}".handler --role "${EMAIL_FUNCTION_ROLE}" --region "${DEFAULT_REGION}" || aws lambda update-function-code --function-name ${FUNCTION_NAME} \
         --zip-file "fileb://SendingEmail.zip"  --region ${DEFAULT_REGION}   